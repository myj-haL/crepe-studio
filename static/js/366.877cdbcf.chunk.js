"use strict";(self.webpackChunkminibim=self.webpackChunkminibim||[]).push([[366],{3346:(t,e,s)=>{s.r(e),s.d(e,{default:()=>l});const o={container:"Works_container__38Rdu",post_list:"Works_post_list__GSjJV",post_item:"Works_post_item__l8oVs",title_box:"Works_title_box__E8xlv",edit_btns:"Works_edit_btns__9EGQv",write_btn:"Works_write_btn__YtrgS"};var i=s(5093),c=s(7689),n=s(1087),r=s(2791),a=s(184);const l=function(){const t=localStorage.getItem("accessToken"),e=(0,c.s0)(),[s,l]=(0,r.useState)([]),[_,d]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{try{const t={NODE_ENV:"production",PUBLIC_URL:"/crepe-studio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL,e=await fetch("".concat(t,"/content/list")),s=await e.json();l(s)}catch(t){console.error("Error fetching posts:",t)}finally{d(!1)}})()}),[]),(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:o.container,children:[t&&(0,a.jsx)("button",{type:"button",className:o.write_btn,onClick:()=>{e("/works/write")},children:"Write"}),_?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsx)("ul",{className:o.post_list,children:s.map((s=>(0,a.jsx)("li",{className:o.post_item,children:(0,a.jsxs)(n.rU,{to:"/works/".concat(s.uuid),className:o.post_link,children:[(0,a.jsx)("img",{alt:"post thumbnail",src:s.mainImage}),(0,a.jsxs)("div",{className:o.title_box,children:[(0,a.jsx)("h3",{className:o.post_title,children:s.title}),(0,a.jsxs)("p",{className:o.category,children:[s.services.join(" / ")," "]}),t&&(0,a.jsxs)("div",{className:o.edit_btns,children:[(0,a.jsx)("button",{type:"button",className:o.del,onClick:t=>(async(t,e)=>{t.preventDefault();try{const t={NODE_ENV:"production",PUBLIC_URL:"/crepe-studio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL,s=await fetch("".concat(t,"/content/").concat(e),{method:"DELETE"});if(s.ok)l((t=>t.filter((t=>t.uuid!==e)))),alert("Post deleted successfully!");else{const t=await s.json();alert("Error: ".concat(t.message))}}catch(s){console.error("Error deleting post:",s),alert("Failed to delete the post.")}})(t,s.uuid),children:"\uc0ad\uc81c"}),"/",(0,a.jsx)("button",{type:"button",className:o.edit,onClick:t=>((t,s)=>{t.preventDefault(),e("/works/".concat(s,"/edit"))})(t,s.uuid),children:"\uc218\uc815"})]})]})]})},s.uuid)))})]})})}}}]);
//# sourceMappingURL=366.877cdbcf.chunk.js.map