"use strict";(self.webpackChunkminibim=self.webpackChunkminibim||[]).push([[643],{7849:(e,t,s)=>{s.d(t,{Z:()=>n});s(2791);const n=s.p+"static/media/icon-add-image.d71fd0b24118b64354b104848c7b2b1e.svg"},7210:(e,t,s)=>{s.d(t,{Z:()=>c});const n={check_form:"Check_check_form__ztXpA",fake_check:"Check_fake_check__B-2RQ"};var i=s(184);const c=function(e){let{content:t,id:s,checked:c,onChange:a}=e;return(0,i.jsxs)("label",{htmlFor:s,className:n.check_form,children:[(0,i.jsx)("input",{type:"checkbox",name:"check",id:s,className:n.true_check,onChange:a,checked:c}),(0,i.jsx)("div",{className:n.fake_check}),(0,i.jsx)("p",{children:t})]})}},31:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var n=s(2791),i=s(5093);const c={container:"WorkEdit_container__gBwyS",editor:"WorkEdit_editor__2lhL8",inner:"WorkEdit_inner__PtHWW",upload:"WorkEdit_upload__kJ05H",title:"WorkEdit_title__g9tU5",form_box:"WorkEdit_form_box__i-pL1",write_box:"WorkEdit_write_box__+i8pW",img_box:"WorkEdit_img_box__xC56B",sub_img_list:"WorkEdit_sub_img_list__wiCbZ",text_box:"WorkEdit_text_box__oY-HM",sub_img:"WorkEdit_sub_img__bc0HQ",check_form_list:"WorkEdit_check_form_list__iTdpY"};var a=s(4307),l=(s(4409),s(7849)),o=s(7210),r=s(7689),d=s(184);const _=function(){const{uuid:e}=(0,r.UO)(),t=(0,r.s0)(),[s,_]=(0,n.useState)(""),[h,u]=(0,n.useState)([]),[m,x]=(0,n.useState)(""),[g,p]=(0,n.useState)(""),[b,k]=(0,n.useState)(null),[j,f]=(0,n.useState)([]),[E,v]=(0,n.useState)([]),C=(0,n.useRef)(null),S=(0,n.useRef)(null);(0,n.useEffect)((()=>{localStorage.getItem("accessToken")||t("/",{replace:!0})}),[t]),(0,n.useEffect)((()=>{(async()=>{const s={NODE_ENV:"production",PUBLIC_URL:"/crepe-studio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL;try{const n=await fetch("".concat(s,"/content/").concat(e));if(n.ok){const e=await n.json();_(e.title),u(e.services||[]),x(e.link),p(e.content),k(e.mainImage),v(e.subImages||[])}else console.error("Failed to fetch data."),t("/works")}catch(n){console.error("Error fetching post data:",n),t("/works")}})()}),[e,t]);const N=e=>{u((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))};return(0,d.jsx)(i.Z,{children:(0,d.jsx)("div",{className:c.container,children:(0,d.jsxs)("div",{className:c.inner,children:[(0,d.jsx)("h3",{className:c.title,children:"Edit Content"}),(0,d.jsxs)("form",{className:c.form_box,onSubmit:async n=>{n.preventDefault();const i={NODE_ENV:"production",PUBLIC_URL:"/crepe-studio",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL,c=new FormData;c.append("title",s),c.append("link",m),c.append("content",g),c.append("services",JSON.stringify(h)),b instanceof File&&c.append("mainImage",b),j.forEach(((e,t)=>c.append("subImages[".concat(t,"]"),e)));try{const s=await fetch("".concat(i,"/content/").concat(e),{method:"PUT",body:c});if(s.ok)alert("Content successfully updated!"),t("/works");else{const e=await s.json();alert("Error: ".concat(e.message))}}catch(a){console.error("Error updating content:",a),alert("Failed to update content.")}},children:[(0,d.jsxs)("div",{className:c.write_box,children:[(0,d.jsx)("span",{children:"Title"}),(0,d.jsx)("input",{type:"text",value:s,onChange:e=>_(e.target.value),placeholder:"Please enter the title."})]}),(0,d.jsxs)("div",{className:c.write_box,children:[(0,d.jsx)("span",{children:"Services"}),(0,d.jsxs)("div",{className:c.check_form_list,children:[(0,d.jsx)(o.Z,{content:"Branding",id:"branding",checked:h.includes("Branding"),onChange:()=>N("Branding")}),(0,d.jsx)(o.Z,{content:"UX/UI Design",id:"design",checked:h.includes("UX/UI Design"),onChange:()=>N("UX/UI Design")}),(0,d.jsx)(o.Z,{content:"Web Publishing",id:"publishing",checked:h.includes("Web Publishing"),onChange:()=>N("Web Publishing")})]})]}),(0,d.jsxs)("div",{className:c.write_box,children:[(0,d.jsx)("span",{children:"Link"}),(0,d.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Please enter the link."})]}),(0,d.jsxs)("div",{className:c.write_box,children:[(0,d.jsx)("span",{children:"Content Details"}),(0,d.jsx)(a.Z,{modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},value:g,onChange:p,className:c.editor,placeholder:"Please enter the contents."})]}),(0,d.jsxs)("div",{className:c.write_box,children:[(0,d.jsxs)("span",{children:["Main Image",(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{style:{color:"#E65706"},children:b?1:0}),"/1"]})]}),(0,d.jsx)("div",{className:c.img_box,onClick:()=>{C.current&&C.current.click()},children:(0,d.jsxs)("div",{className:c.text_box,children:[(0,d.jsx)("input",{type:"file",ref:C,onChange:e=>((e,t)=>{const s=e.target.files[0];s&&t(s)})(e,k),style:{display:"none"}}),b?(0,d.jsx)("img",{alt:"Main Preview",src:b instanceof File?URL.createObjectURL(b):b,className:c.preview_img}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{alt:"add img",src:l.Z}),(0,d.jsx)("p",{children:"Click the icon to upload an image."})]})]})})]}),(0,d.jsxs)("div",{className:c.write_box,children:[(0,d.jsxs)("span",{children:["Sub Images",(0,d.jsxs)("p",{children:[(0,d.jsx)("b",{style:{color:"#E65706"},children:j.length+E.length}),"/5"]})]}),(0,d.jsxs)("ul",{className:c.sub_img_list,children:[E.map(((e,t)=>(0,d.jsxs)("li",{children:[(0,d.jsx)("img",{alt:"sub ".concat(t),src:e,className:c.sub_img}),(0,d.jsx)("button",{type:"button",onClick:()=>(e=>{f((t=>t.filter(((t,s)=>s!==e))))})(t),className:c.remove_button,children:"Remove"})]},"existing-".concat(t)))),j.length<5-E.length&&(0,d.jsx)("li",{onClick:()=>{S.current&&S.current.click()},children:(0,d.jsxs)("div",{className:c.text_box,children:[(0,d.jsx)("input",{type:"file",ref:S,onChange:e=>{const t=e.target.files[0];t&&f((e=>[...e,t]))},style:{display:"none"}}),(0,d.jsx)("img",{alt:"add img",src:l.Z}),(0,d.jsx)("p",{children:"Click the icon to upload an image."})]})}),j.map(((e,t)=>(0,d.jsx)("li",{children:(0,d.jsx)("img",{alt:"sub ".concat(t),src:URL.createObjectURL(e),className:c.sub_img})},t)))]})]}),(0,d.jsx)("button",{type:"submit",className:c.upload,children:"Update Content"})]})]})})})}}}]);
//# sourceMappingURL=643.e8ede778.chunk.js.map