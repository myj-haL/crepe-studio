"use strict";(self.webpackChunkminibim=self.webpackChunkminibim||[]).push([[366],{3346:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});const c={container:"Works_container__38Rdu",post_list:"Works_post_list__GSjJV",post_item:"Works_post_item__l8oVs",title_box:"Works_title_box__E8xlv",edit_btns:"Works_edit_btns__9EGQv",write_btn:"Works_write_btn__YtrgS"};var i=s(9006),a=s(7689),n=s(1087),o=s(2791),l=s(184);const r=function(){const t=localStorage.getItem("accessToken"),e=(0,a.s0)(),[s,r]=(0,o.useState)([]),[d,_]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{(async()=>{try{const t="https://back-api-theta.vercel.app",e=await fetch("".concat(t,"/content/list")),s=await e.json();r(s)}catch(t){console.error("Error fetching posts:",t)}finally{_(!1)}})()}),[]),(0,l.jsx)(i.Z,{children:(0,l.jsxs)("div",{className:c.container,children:[t&&(0,l.jsx)("button",{type:"button",className:c.write_btn,onClick:()=>{e("/works/write")},children:"Write"}),d?(0,l.jsx)("p",{children:"Loading..."}):(0,l.jsx)("ul",{className:c.post_list,children:s.map((s=>(0,l.jsx)("li",{className:c.post_item,children:(0,l.jsxs)(n.rU,{to:"/works/".concat(s.uuid),className:c.post_link,children:[(0,l.jsx)("img",{alt:"post thumbnail",src:s.mainImage}),(0,l.jsxs)("div",{className:c.title_box,children:[(0,l.jsx)("h3",{className:c.post_title,children:s.title}),(0,l.jsxs)("p",{className:c.category,children:[s.services.join(" / ")," "]}),t&&(0,l.jsxs)("div",{className:c.edit_btns,children:[(0,l.jsx)("button",{type:"button",className:c.del,onClick:t=>(async(t,e)=>{t.preventDefault();try{const t="https://back-api-theta.vercel.app",s=await fetch("".concat(t,"/content/").concat(e),{method:"DELETE"});if(s.ok)r((t=>t.filter((t=>t.uuid!==e)))),alert("Post deleted successfully!");else{const t=await s.json();alert("Error: ".concat(t.message))}}catch(s){console.error("Error deleting post:",s),alert("Failed to delete the post.")}})(t,s.uuid),children:"\uc0ad\uc81c"}),"/",(0,l.jsx)("button",{type:"button",className:c.edit,onClick:t=>((t,s)=>{t.preventDefault(),e("/works/".concat(s,"/edit"))})(t,s.uuid),children:"\uc218\uc815"})]})]})]})},s.uuid)))})]})})}}}]);
//# sourceMappingURL=366.2c21ffd8.chunk.js.map