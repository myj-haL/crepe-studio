"use strict";(self.webpackChunkminibim=self.webpackChunkminibim||[]).push([[643],{7849:(e,t,s)=>{s.d(t,{Z:()=>n});s(2791);const n=s.p+"static/media/icon-add-image.d71fd0b24118b64354b104848c7b2b1e.svg"},7210:(e,t,s)=>{s.d(t,{Z:()=>a});const n={check_form:"Check_check_form__ztXpA",fake_check:"Check_fake_check__B-2RQ"};var c=s(184);const a=function(e){let{content:t,id:s,checked:a,onChange:i}=e;return(0,c.jsxs)("label",{htmlFor:s,className:n.check_form,children:[(0,c.jsx)("input",{type:"checkbox",name:"check",id:s,className:n.true_check,onChange:i,checked:a}),(0,c.jsx)("div",{className:n.fake_check}),(0,c.jsx)("p",{children:t})]})}},31:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var n=s(2791),c=s(9006);const a="WorkEdit_container__gBwyS",i="WorkEdit_editor__2lhL8",l="WorkEdit_inner__PtHWW",r="WorkEdit_upload__kJ05H",o="WorkEdit_title__g9tU5",d="WorkEdit_form_box__i-pL1",h="WorkEdit_write_box__+i8pW",u="WorkEdit_img_box__xC56B",m="WorkEdit_sub_img_list__wiCbZ",p="WorkEdit_text_box__oY-HM",_="WorkEdit_preview_img__B5VpT",g="WorkEdit_sub_img__bc0HQ",k="WorkEdit_remove_button__8au1o",x="WorkEdit_check_form_list__iTdpY";var j=s(4307),b=(s(4409),s(7849)),f=s(7210),v=s(7689),C=s(184);const N=function(){const{uuid:e}=(0,v.UO)(),t=(0,v.s0)(),[s,N]=(0,n.useState)(""),[E,y]=(0,n.useState)([]),[W,w]=(0,n.useState)(""),[U,S]=(0,n.useState)(""),[I,Z]=(0,n.useState)(null),[P,R]=(0,n.useState)([]),[B,F]=(0,n.useState)([]),L=(0,n.useRef)(null),D=(0,n.useRef)(null);(0,n.useEffect)((()=>{localStorage.getItem("accessToken")||t("/",{replace:!0})}),[t]),(0,n.useEffect)((()=>{(async()=>{try{const s=await fetch("".concat("https://back-api-theta.vercel.app","/content/").concat(e));if(s.ok){const e=await s.json();N(e.title),y(e.services||[]),w(e.link),S(e.content),Z(e.mainImage),F(e.subImages||[])}else console.error("Failed to fetch data."),t("/works")}catch(s){console.error("Error fetching post data:",s),t("/works")}})()}),[e,t]);const T=e=>{y((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))};return(0,C.jsx)(c.Z,{children:(0,C.jsx)("div",{className:a,children:(0,C.jsxs)("div",{className:l,children:[(0,C.jsx)("h3",{className:o,children:"Edit Content"}),(0,C.jsxs)("form",{className:d,onSubmit:async n=>{n.preventDefault();const c=new FormData;c.append("title",s),c.append("link",W),c.append("content",U),c.append("services",JSON.stringify(E)),I instanceof File&&c.append("mainImage",I),P.forEach(((e,t)=>c.append("subImages[".concat(t,"]"),e)));try{const s=await fetch("".concat("https://back-api-theta.vercel.app","/content/").concat(e),{method:"PUT",body:c});if(s.ok)alert("Content successfully updated!"),t("/works");else{const e=await s.json();alert("Error: ".concat(e.message))}}catch(a){console.error("Error updating content:",a),alert("Failed to update content.")}},children:[(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("span",{children:"Title"}),(0,C.jsx)("input",{type:"text",value:s,onChange:e=>N(e.target.value),placeholder:"Please enter the title."})]}),(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("span",{children:"Services"}),(0,C.jsxs)("div",{className:x,children:[(0,C.jsx)(f.Z,{content:"Branding",id:"branding",checked:E.includes("Branding"),onChange:()=>T("Branding")}),(0,C.jsx)(f.Z,{content:"UX/UI Design",id:"design",checked:E.includes("UX/UI Design"),onChange:()=>T("UX/UI Design")}),(0,C.jsx)(f.Z,{content:"Web Publishing",id:"publishing",checked:E.includes("Web Publishing"),onChange:()=>T("Web Publishing")})]})]}),(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("span",{children:"Link"}),(0,C.jsx)("input",{type:"text",value:W,onChange:e=>w(e.target.value),placeholder:"Please enter the link."})]}),(0,C.jsxs)("div",{className:h,children:[(0,C.jsx)("span",{children:"Content Details"}),(0,C.jsx)(j.Z,{modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},value:U,onChange:S,className:i,placeholder:"Please enter the contents."})]}),(0,C.jsxs)("div",{className:h,children:[(0,C.jsxs)("span",{children:["Main Image",(0,C.jsxs)("p",{children:[(0,C.jsx)("b",{style:{color:"#E65706"},children:I?1:0}),"/1"]})]}),(0,C.jsx)("div",{className:u,onClick:()=>{L.current&&L.current.click()},children:(0,C.jsxs)("div",{className:p,children:[(0,C.jsx)("input",{type:"file",ref:L,onChange:e=>((e,t)=>{const s=e.target.files[0];s&&t(s)})(e,Z),style:{display:"none"}}),I?(0,C.jsx)("img",{alt:"Main Preview",src:I instanceof File?URL.createObjectURL(I):I,className:_}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("img",{alt:"add img",src:b.Z}),(0,C.jsx)("p",{children:"Click the icon to upload an image."})]})]})})]}),(0,C.jsxs)("div",{className:h,children:[(0,C.jsxs)("span",{children:["Sub Images",(0,C.jsxs)("p",{children:[(0,C.jsx)("b",{style:{color:"#E65706"},children:P.length+B.length}),"/5"]})]}),(0,C.jsxs)("ul",{className:m,children:[P.length<5-B.length&&(0,C.jsx)("li",{onClick:()=>{D.current&&D.current.click()},children:(0,C.jsxs)("div",{className:p,children:[(0,C.jsx)("input",{type:"file",ref:D,onChange:e=>{const t=e.target.files[0];t&&R((e=>[...e,t]))},style:{display:"none"}}),(0,C.jsx)("img",{alt:"add img",src:b.Z}),(0,C.jsx)("p",{children:"Click the icon to upload an image."})]})}),B.map(((e,t)=>(0,C.jsxs)("li",{children:[(0,C.jsx)("img",{alt:"sub ".concat(t),src:e,className:g}),(0,C.jsx)("button",{type:"button",onClick:()=>(e=>{R((t=>t.filter(((t,s)=>s!==e))))})(t),className:k,children:"Remove"})]},"existing-".concat(t)))),P.map(((e,t)=>(0,C.jsx)("li",{children:(0,C.jsx)("img",{alt:"sub ".concat(t),src:URL.createObjectURL(e),className:g})},t)))]})]}),(0,C.jsx)("button",{type:"submit",className:r,children:"Update Content"})]})]})})})}}}]);
//# sourceMappingURL=643.fb199df3.chunk.js.map